
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      --><title>SegmentalCylinder</title><meta name="generator" content="MATLAB 8.6"><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2015-12-02"><meta name="DC.source" content="SegmentalCylinder.m"><style type="text/css">
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,font,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}:focus{outine:0}ins{text-decoration:none}del{text-decoration:line-through}table{border-collapse:collapse;border-spacing:0}

html { min-height:100%; margin-bottom:1px; }
html body { height:100%; margin:0px; font-family:Arial, Helvetica, sans-serif; font-size:10px; color:#000; line-height:140%; background:#fff none; overflow-y:scroll; }
html body td { vertical-align:top; text-align:left; }

h1 { padding:0px; margin:0px 0px 25px; font-family:Arial, Helvetica, sans-serif; font-size:1.5em; color:#d55000; line-height:100%; font-weight:normal; }
h2 { padding:0px; margin:0px 0px 8px; font-family:Arial, Helvetica, sans-serif; font-size:1.2em; color:#000; font-weight:bold; line-height:140%; border-bottom:1px solid #d6d4d4; display:block; }
h3 { padding:0px; margin:0px 0px 5px; font-family:Arial, Helvetica, sans-serif; font-size:1.1em; color:#000; font-weight:bold; line-height:140%; }

a { color:#005fce; text-decoration:none; }
a:hover { color:#005fce; text-decoration:underline; }
a:visited { color:#004aa0; text-decoration:none; }

p { padding:0px; margin:0px 0px 20px; }
img { padding:0px; margin:0px 0px 20px; border:none; }
p img, pre img, tt img, li img, h1 img, h2 img { margin-bottom:0px; } 

ul { padding:0px; margin:0px 0px 20px 23px; list-style:square; }
ul li { padding:0px; margin:0px 0px 7px 0px; }
ul li ul { padding:5px 0px 0px; margin:0px 0px 7px 23px; }
ul li ol li { list-style:decimal; }
ol { padding:0px; margin:0px 0px 20px 0px; list-style:decimal; }
ol li { padding:0px; margin:0px 0px 7px 23px; list-style-type:decimal; }
ol li ol { padding:5px 0px 0px; margin:0px 0px 7px 0px; }
ol li ol li { list-style-type:lower-alpha; }
ol li ul { padding-top:7px; }
ol li ul li { list-style:square; }

.content { font-size:1.2em; line-height:140%; padding: 20px; }

pre, code { font-size:12px; }
tt { font-size: 1.2em; }
pre { margin:0px 0px 20px; }
pre.codeinput { padding:10px; border:1px solid #d3d3d3; background:#f7f7f7; }
pre.codeoutput { padding:10px 11px; margin:0px 0px 20px; color:#4c4c4c; }
pre.error { color:red; }

@media print { pre.codeinput, pre.codeoutput { word-wrap:break-word; width:100%; } }

span.keyword { color:#0000FF }
span.comment { color:#228B22 }
span.string { color:#A020F0 }
span.untermstring { color:#B20000 }
span.syscmd { color:#B28C00 }

.footer { width:auto; padding:10px 0px; margin:25px 0px 0px; border-top:1px dotted #878787; font-size:0.8em; line-height:140%; font-style:italic; color:#878787; text-align:left; float:none; }
.footer p { margin:0px; }
.footer a { color:#878787; }
.footer a:hover { color:#878787; text-decoration:underline; }
.footer a:visited { color:#878787; }

table th { padding:7px 5px; text-align:left; vertical-align:middle; border: 1px solid #d6d4d4; font-weight:bold; }
table td { padding:7px 5px; text-align:left; vertical-align:top; border:1px solid #d6d4d4; }





  </style></head><body><div class="content"><h1>SegmentalCylinder</h1><!--introduction--><p>Concrete subclass of <a href="GenericCylinder.html"><tt>GenericCylinder</tt></a> representing a cylinder with a cross section of a circular segment.</p><!--/introduction--><h2>Contents</h2><div><ul><li><a href="#1">Description</a></li><li><a href="#2">Construction</a></li><li><a href="#3">Example</a></li><li><a href="#4">See Also</a></li></ul></div><h2>Description<a name="1"></a></h2><p><tt>SegmentalCylinder</tt> represents the shape of a segmental cylinder.  Its cross section is a circular segment (region surrounded by an arc and the chord connecting its end points).  The axis of the cylinder should be aligned with one of the axes of the Cartesian coordinate system.</p><h2>Construction<a name="2"></a></h2><pre>shape = SegmentalCylinder(normal_axis, height, center, radius, theta, d_theta)
shape = SegmentalCylinder(normal_axis, height, center, radius, theta, d_theta, dl_max)</pre><p><b>Input Arguments</b></p><div><ul><li><tt>normal_axis</tt>: axis of the cylinder.  It should be one of <tt>Axis.x</tt>, <tt>Axis.y</tt>, <tt>Axis.z</tt>.</li><li><tt>height</tt>: size of the cylinder along its axis.</li><li><tt>center</tt>: center of the cylinder in the format of <tt>[x y z]</tt>.  For <tt>normal_axis = Axis.z</tt>, <tt>(x, y)</tt> is the coordinate of the center of the circle.</li><li><tt>radius</tt>: radius of the circle</li><li><tt>theta</tt>: beginning angle of the segment in radian</li><li><tt>d_theta</tt>: angular width of the segment in radian between -|pi| and <tt>pi</tt> (the central angle of a segment should not exceed <tt>pi</tt>)</li><li><tt>dl_max</tt>: maximum grid size allowed in the cylinder.  It can be either <tt>[dx dy dz]</tt> or a single real number <tt>dl</tt> for <tt>dx = dy = dz</tt>.  If unassigned, <tt>dl_max = Inf</tt> is used.</li></ul></div><h2>Example<a name="3"></a></h2><pre class="language-matlab"><span class="comment">% Create an instance of SegmentalCylinder.</span>
shape = SegmentalCylinder(Axis.z, 100, [0 0 50], 50, pi/6, pi/3);
</pre><pre class="language-matlab"><span class="comment">% Use the constructed shape in maxwell_run().</span>
[E, H] = maxwell_run({INITIAL ARGUMENTS}, <span class="string">'OBJ'</span>, {<span class="string">'vacuum'</span>, <span class="string">'none'</span>, 1.0}, shape, {REMAINING ARGUMENTS});
</pre><h2>See Also<a name="4"></a></h2><p><a href="SectoralCylinder.html"><tt>CircularCylinder</tt></a>, <a href="CircularCylinder.html"><tt>CircularCylinder</tt></a>, <a href="CircularShellCylinder.html"><tt>CircularShellCylinder</tt></a>, <a href="EllipticCylinder.html"><tt>EllipticCylinder</tt></a>, <a href="PolyognalCylinder.html"><tt>PolygonalCylinder</tt></a>, <a href="Shape.html"><tt>Shape</tt></a>, <a href="maxwell_run.html"><tt>maxwell_run</tt></a></p><p class="footer"><br><a href="http://www.mathworks.com/products/matlab/">Published with MATLAB&reg; R2015b</a><br></p></div><!--
##### SOURCE BEGIN #####
%% SegmentalCylinder
% Concrete subclass of <GenericCylinder.html |GenericCylinder|>
% representing a cylinder with a cross section of a circular segment.

%%% Description
% |SegmentalCylinder| represents the shape of a segmental cylinder.  Its
% cross section is a circular segment (region surrounded by an arc and the
% chord connecting its end points).  The axis of the cylinder should be
% aligned with one of the axes of the Cartesian coordinate system.

%%% Construction
%  shape = SegmentalCylinder(normal_axis, height, center, radius, theta, d_theta)
%  shape = SegmentalCylinder(normal_axis, height, center, radius, theta, d_theta, dl_max)
% 
% *Input Arguments*
%
% * |normal_axis|: axis of the cylinder.  It should be one of |Axis.x|,
% |Axis.y|, |Axis.z|.
% * |height|: size of the cylinder along its axis.
% * |center|: center of the cylinder in the format of |[x y z]|.  For
% |normal_axis = Axis.z|, |(x, y)| is the coordinate of the center of the
% circle.
% * |radius|: radius of the circle
% * |theta|: beginning angle of the segment in radian
% * |d_theta|: angular width of the segment in radian between -|pi| and |pi|
% (the central angle of a segment should not exceed |pi|)
% * |dl_max|: maximum grid size allowed in the cylinder.  It can be either |[dx
% dy dz]| or a single real number |dl| for |dx = dy = dz|.  If unassigned,
% |dl_max = Inf| is used.

%%% Example
%   % Create an instance of SegmentalCylinder.
%   shape = SegmentalCylinder(Axis.z, 100, [0 0 50], 50, pi/6, pi/3);
%
%   % Use the constructed shape in maxwell_run().
%   [E, H] = maxwell_run({INITIAL ARGUMENTS}, 'OBJ', {'vacuum', 'none', 1.0}, shape, {REMAINING ARGUMENTS});

%%% See Also
% <SectoralCylinder.html |CircularCylinder|>, <CircularCylinder.html
% |CircularCylinder|>, <CircularShellCylinder.html
% |CircularShellCylinder|>, <EllipticCylinder.html |EllipticCylinder|>,
% <PolyognalCylinder.html |PolygonalCylinder|>, <Shape.html |Shape|>,
% <maxwell_run.html |maxwell_run|>

classdef SegmentalCylinder < GenericCylinder

	methods
        function this = SegmentalCylinder(normal_axis, height, center, radius, theta, d_theta, dl_max)
			chkarg(istypesizeof(normal_axis, 'Axis'), '"normal_axis" should be instance of Axis.');
			chkarg(istypesizeof(height, 'real') && height > 0, '"height" should be positive.');
			chkarg(istypesizeof(center, 'real', [1, Axis.count]), ...
				'"center" should be length-%d row vector with real elements.', Axis.count);
			chkarg(istypesizeof(radius, 'real') && radius > 0, '"radius" should be positive.');
			chkarg(istypesizeof(theta, 'real'), '"theta" should be real.');
			chkarg(istypesizeof(d_theta, 'real') && (d_theta <= 2*pi || d_theta >= -2*pi), '"d_theta" should be real between -pi and pi.');
			
			sectoral = SectoralCylinder(normal_axis, height, center, radius, theta, d_theta, dl_max);
			
			
			thetas = sort([theta, theta + d_theta]);
			cth = mean(thetas);  % center of theta range
			cth = mod(cth + pi, 2*pi) - pi;  % -pi <= c_th < pi (range of atan2(y,x))
			
			mc_dir = [cos(cth) sin(cth)];  % direction bisecting the segment

			[h, v, n] = cycle(normal_axis);
			m = center([h, v]) + mean(radius * [cos(thetas.') sin(thetas.')]);
			
			
			

			% lsf2d() can handle rho = [p q] with column vectors p and q.  The
			% level set function is the one for a rectangle defined in the
			% (theta, radius) domain.
			function level = lsf2d(p, q)
				chkarg(istypeof(p, 'real'), '"p" should be array with real elements.');
				chkarg(istypeof(q, 'real'), '"q" should be array with real elements.');
				chkarg(isequal(size(p), size(q)), '"p" and "q" should have same size.');
				
				level1 = sectoral.lsf2d(p, q);  % level set function of sectoral cylinder

								
				
				
				
				c = center([h, v]);
				
				m = c + mean(radius * [cos(thetas.') sin(thetas.')]);
				
				n_cth = [cos(cth) sin(cth)];  % normal vector in centeral angle direction
				

				level2 = rm * n_cth.';
				
				
				level = min(level1, level2);
			end
			
			lprim = cell(1, Axis.count);
			lprim{h} = radius * cos(thetas) + center(h);
			lprim{v} = radius * sin(thetas) + center(v);
			lprim{n} = [-height height]/2 + center(n);
			
			if lsf_th(0) > 0
				lprim{h} = [lprim{h}, center(h) + radius];
			end
			if lsf_th(pi/2) > 0
				lprim{v} = [lprim{v}, center(v) + radius];
			end
			if lsf_th(pi) > 0
				lprim{h} = [lprim{h}, center(h) - radius];
			end
			if lsf_th(3*pi/2) > 0
				lprim{v} = [lprim{v}, center(v) - radius];
			end
						
			if nargin < 7  % no dl_max
				super_args = {normal_axis, @lsf2d, lprim};
			else
				super_args = {normal_axis, @lsf2d, lprim, dl_max};
			end
			
			this = this@GenericCylinder(super_args{:});
		end
	end
end


##### SOURCE END #####
--></body></html>